---
// Navbar.astro
---

<nav class="bg-black border-b border-yellow-500/20 fixed top-0 left-0 right-0 z-50">
    <div class="mx-auto max-w-7xl px-6 py-4">
        <div class="flex items-center justify-between">
            <!-- Logo/Nombre -->
            <div class="flex items-center gap-3">
                <div class="flex size-10 items-center justify-center rounded-lg bg-linear-to-br from-yellow-400 to-yellow-600">
                    <span class="text-xl font-bold text-black">FC</span>
                </div>
                <div>
                    <h1 class="text-lg font-bold tracking-tight text-white">
                        Fabricio Cervantes
                    </h1>
                    <p class="text-xs font-medium text-yellow-400">
                        Full-Stack Developer
                    </p>
                </div>
            </div>

            <!-- Links de navegación desktop -->
            <div class="hidden items-center gap-8 md:flex">
                <a href="#sobre-mi" class="nav-link text-md font-medium text-gray-300 transition-colors duration-300 hover:text-yellow-400">
                    Sobre mí
                </a>
                <a href="#experiencia" class="nav-link text-md font-medium text-gray-300 transition-colors duration-300 hover:text-yellow-400">
                    Experiencia
                </a>
                <a href="#proyectos" class="nav-link text-md font-medium text-gray-300 transition-colors duration-300 hover:text-yellow-400">
                    Proyectos
                </a>
                <a href="#contacto" class="rounded-lg bg-yellow-500 px-6 py-2 font-semibold text-black transition-all duration-300 hover:bg-yellow-400 hover:shadow-lg hover:shadow-yellow-500/50">
                    Contacto
                </a>
            </div>

            <!-- Botón menú móvil -->
            <button id="menu-toggle" class="text-yellow-400 hover:text-yellow-300 md:hidden" aria-label="Abrir menú">
                <svg id="menu-icon" class="size-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
                <svg id="close-icon" class="size-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>

        <!-- Menú móvil -->
        <div id="mobile-menu" class="hidden md:hidden">
            <div class="flex flex-col gap-4 py-4">
                <a href="#sobre-mi" class="mobile-link text-sm font-medium text-gray-300 transition-colors duration-300 hover:text-yellow-400 py-2">
                    Sobre mí
                </a>
                <a href="#experiencia" class="mobile-link text-sm font-medium text-gray-300 transition-colors duration-300 hover:text-yellow-400 py-2">
                    Experiencia
                </a>
                <a href="#proyectos" class="mobile-link text-sm font-medium text-gray-300 transition-colors duration-300 hover:text-yellow-400 py-2">
                    Proyectos
                </a>
                <a href="#contacto" class="mobile-link rounded-lg bg-yellow-500 px-6 py-2 font-semibold text-black transition-all duration-300 hover:bg-yellow-400 text-center">
                    Contacto
                </a>
            </div>
        </div>
    </div>
</nav>

<!-- Espaciador para compensar el nav fixed -->
<div class="h-[72px]"></div>

<script>
    // Toggle menú móvil
    const menuToggle = document.getElementById('menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');

    menuToggle?.addEventListener('click', () => {
        mobileMenu?.classList.toggle('hidden');
        menuIcon?.classList.toggle('hidden');
        closeIcon?.classList.toggle('hidden');
    });

    // Cerrar menú al hacer click en un link
    const mobileLinks = document.querySelectorAll('.mobile-link');
    mobileLinks.forEach(link => {
        link.addEventListener('click', () => {
            mobileMenu?.classList.add('hidden');
            menuIcon?.classList.remove('hidden');
            closeIcon?.classList.add('hidden');
        });
    });

    // Smooth scroll para todos los links
    const allNavLinks = document.querySelectorAll('.nav-link, .mobile-link');
    allNavLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const href = link.getAttribute('href');
            if (href && href.startsWith('#')) {
                const target = document.querySelector(href);
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }
        });
    });

    // Resaltar link activo al hacer scroll
    const sections = document.querySelectorAll('section[id]');
    
    const highlightNav = () => {
        const scrollY = window.scrollY;
        
        sections.forEach(section => {
            const sectionHeight = section.offsetHeight;
            const sectionTop = section.offsetTop - 100;
            const sectionId = section.getAttribute('id');
            
            if (scrollY > sectionTop && scrollY <= sectionTop + sectionHeight) {
                document.querySelectorAll(`.nav-link[href="#${sectionId}"]`).forEach(link => {
                    link.classList.add('text-yellow-400');
                    link.classList.remove('text-gray-300');
                });
            } else {
                document.querySelectorAll(`.nav-link[href="#${sectionId}"]`).forEach(link => {
                    link.classList.remove('text-yellow-400');
                    link.classList.add('text-gray-300');
                });
            }
        });
    };

    window.addEventListener('scroll', highlightNav);
</script>